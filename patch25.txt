------------------------
Аллоды 2: Повелитель Душ
   Важная Информация
------------------------
Версия от 22 января 2015

ВНИМАНИЕ! Данное обновление включает в себя предыдущие обновления.

Обновление 25 (версия 3.0)
--------------------------
1. RES-архивы более не используются, все ресурсы игры находятся в папке data.
2. Введена автоматическая синхронизация ресурсов игры с хэтом без необходимости загрузки новой версии вручную.
3. При обновлении патча (allods2.exe, a2mgr.dll) более не сбрасывается файл allods2.cfg.

Обновление 24 (версия 2.2)
--------------------------
1. Добавлен таймер. Для использования необходимо в конфигурационном файле установить r_stopwatch в true и использовать правый Shift для активации или обнуления таймера.
2. Введен новый режим сервера: Softcore. В данном режиме из убитых игроков никогда не выпадают вещи, а опыт накапливается в десять раз медленнее.

Обновление 23 (версия 2.1.1)
----------------------------
1. Исправлен баг, мешающий заходить на большие логины и влиявший на обновление списка серверов.
2. Удалена библиотека libCURL и сопутствующие зависимости от .NET 3.5 и VCR2010.

Обновление 22 (версия 2.1)
--------------------------
1. Добавлена автоматическая загрузка новых версий патча с хэта.
2. Добавлено автоматическое подтверждение IP-адреса для игры на хэте.

Обновление 21 (версия 2.0.4)
----------------------------
1. Исправлено обновление карт.
2. Исправлено отображение дистанции заклинаний.
3. Исправлен вылет клиента при maxhp == 0.

Обновление 20 (версия 2.0)
--------------------------
1. Добавлена возможность сохранять скриншоты в отдельную папку в разных форматах (PNG, BMP, GIF, JPEG).
2. Добавлена возможность сохранять историю сообщений в отдельную папку и разделять файлы с историей по дням.
3. Добавлена автоматическая загрузка обновлений с хэта при несоответствии версий файлов.
4. Исправлено несколько ошибок в графическом интерфейсе (GUI).
5. Изменение внешнего вида FPS и текущего времени.
6. Добавлены опции в файле конфигурации для включения и настройки сетки.
7. Исправлено ведение истории сообщений при нескольких открытых окнах игры.
8. Исправлено несколько ошибок в allods2.exe.
9. Русская и английская версия распространяется как один патч с возможностью переключения языков через файл конфигурации.
10. Исправлена ошибка в однопользовательской версии игры, ключ --single более не требуется.

Файл конфигурации allods2.cfg
-----------------------------
Данный файл довольно подробно откомментирован и в нём присутствуют все возможные параметры.

Выбор языка игры
----------------
При установке в файл конфигурации должен быть записан правильный язык (в данном случае русский). Если же опции в allods2.cfg нет, язык по умолчанию выбирается следующим образом:
Если язык системы (язык, на котором операционная система была установлена) НЕ русский, то язык по умолчанию будет английским, в противном случае это русский.

Обновление 14 (версия 1.14)
---------------------------
1. Добавлена возможность сохранения скриншотов в PNG.
2. Исправлено несколько ошибок в allods2.exe.

Обновление 13 (версия 1.13)
---------------------------
1. Исправлен вылет при выводе сообщений с '%'.
2. Добавлен альтернативный режим чата, при котором выделяются сообщения в приват (см. alt_chat в allods2.conf).
3. Возможность вывода текущего времени и FPS во время игры (см. show_watches / show_fps в allods2.conf).

Обновление 12 (версия 1.12)
---------------------------
1. Исправлен вылет при входе в лавку г.Каарга (спасибо Kissk'е за тестирование).
2. Исправлены ошибки шрифтов.
3. Устранена зависимость от параметра INSTALLDIR в реестре.
4. Исправлены ошибки списка карт в сетевой игре.

Обновление 11 (версия 1.11)
---------------------------
1. Перерисованы буквы Т и Г, добавлена буква Ё, тильда (спасибо Atacarme).
2. В игру добавлены демоны (проявляйте осторожность).
3. Добавлена возможность подключения ресурсов от Вампира в отдельном файле: "a25graph.res".
4. Добавлены дополнительные видеорежимы: 1280x1024 (-1280), произвольный (например, --res:1024x600).
5. Устранен ряд ошибок и вылетов.
6. Отключен режим #show map.
7. История чата сохраняется в allods2.log.
8. Введено настраиваемое ограничение скорости прокрутки карты (см. scroll_interval в allods2.conf).
9. Ведение истории команд чата (Up/Down в режиме ввода команды).
10. Прокрутка инвентаря клавишами PgUp/PgDn (полки в магазине - Ctrl+PgUp/Ctrl+PgDn).
11. Игра на хэте отделена от одиночной (одиночная игра запускается с помощью ключа "--single").

Обновление 10 (версия 1.10)
---------------------------
1. Исправлена ошибка с обзором.
2. Исправлена ошибка иcпользования денег.
3. Допускается игра в локальной сети серверными персонажами.
4. Отключен режим игры "Подключение к списку серверов".
5. Адрес хета теперь вводить не нужно.
6. Исправлена ошибка с длинными описаниями магических предметов.
7. Вещи теперь можно выбрасывать по 100 (Alt) и 10 (Ctrl) штук сразу.
8. Запрещена борода для воина.
9. Корректное сохранение настроек в Windows NT, 2000, XP, 2003.
10. Карты автоматически копируются в maps\ .
11. Изменен протокол игры.
12. Частично решена проблема подъема слетных мешков.

Обновление 9 (версия 1.09)
--------------------------
1. Частично исправлена ошибка с обзором.

Обновление 8 (версия 1.08)
--------------------------
1. Частично исправлена ошибка с обзором.
2. Для запуска игры не требуется диск.

Обновление 7 (версия 1.07)
--------------------------
1. Исправлена ошибка со сбоем сервера при посылке длинных сообщений.
2. Исправлена ошибка с возможностью нечестно покупать вещи в магазине.
3. Исправлены ошибки, возникавшие при одновременном входе в игру нескольких игроков.
4. Запрещено брать и выполнять задания в "Арене".
5. При входе в игру и после оживления персонаж выбирается и центрируется на экране.
6. Игра теперь будет запускаться в системе Windows 95 без Windows Sockets 2, но не будет работать пинг серверов.
7. Счет игры в "Арене" теперь можно посмотреть клавишей F2.
8. Исправлена ошибка с предметами у юнитов в редакторе карт.

Обновление 6 (версия 1.06)
--------------------------
1. Исправлена ошибка с зависанием игры в режиме "Арена".
2. Исправлена ошибка со сбоем сервера при использовании свитков на себя.

Обновление 5 (версия 1.05)
--------------------------
1. Исправлена ошибка с некорректным переименованием персонажа при игре на интернет-сервере.
2. Исправлены ошибки с некорректным удалением персонажей при игре на интернет-сервере.
3. Исправлена ошибка со сбоем игры при нажатии клавиши <~> при вводе строки.
4. Исправлены ошибки с вызовом некорректных монстров заклинаниями "зов" и "перерождение".
5. Вместо режима "Турнир" введен режим игры "Арена". Особенности этого режима приведены ниже.
6. Добавлена возможность кэмпинга - выхода из игры в любой точке карты при небоевой обстановке вокруг персонажа. В меню, вызываемом по ESC, выберите пункт "кэмпинг". Начнется 30-секундный отсчет. Любая команда, отданная персонажу, или атака персонажа врагами отменяет кэмпинг. Эта возможность распространяется только на интернет-сервер.
7. Добавлена выдача предупреждения о закрытии интернет-сервера и смене карты на интернет-сервере.
8. Введена проверка на уникальность имен при игре на интернет-сервере. Теперь вы не сможете завести нового персонажа с именем, которое уже использовано одним из игроков. Проверка производится только по первой части имени. На персонажей с повторяющимися именами, созданных до введения этой проверки, она не распространяется.
9. Введено принудительное обновление данных персонажей при подключении к хэту. Это позволит избежать несоответствия параметров персонажа на клиенте и на хэте, которое может возникнуть при сбое сервера.

Особенности режима "Арена"
--------------------------
Цель игры - набрать как можно больше очков за убийство других персонажей. В игру можно вступать в любой момент. При выходе из игры персонаж сразу уходит с карты, не оставаясь там на 5 минут, как в кооперативной игре. При достижении лимита очков или по истечении определенного времени игра заканчивается. Ваш счет и место в таблице можно посмотреть, нажав клавишу W (счет игры выводится вместо списка заданий). Полную таблицу результатов можно просмотреть, выбрав пункт "результаты игры" в меню, вызываемом по клавише ESC.
В режиме "Арена" вы играете персонажами, которых вы натренировали в кооперативной игре. Но, вы не набираете опыт и не теряете вещи при смерти. Все изменения, произошедшие с персонажем во время игры в "Арену", не сохранятся при выходе из игры. Таким образом, "Арена" - хорошее место, где можно помериться силами без каких-либо потерь для персонажа.
Игра в "Арену" может происходить как на стандартных, так и на специальных картах. При игре на стандартных картах автоматически появятся несколько новых точек высадки. При смерти персонажа вы оживете в случайном месте.
На время игры в "Арену" у персонажа изымаются все целебные снадобья. Также вы не сможете приобрести эти снадобья в магазинах.

Обновление 4 (версия 1.04)
--------------------------
1. Исправлена ошибка с некорректной выдачей зелий в качестве награды за задание.
2. Исправлена ошибка с возможностью атаки летающих монстров нестрелковым оружием.
3. Исправлена ошибка с исчезновением пузырьков в рюкзаке героя.
4. Исправлена ошибка с перестающими оживать монстрами.
5. Исправлена ошибка со сбоем при подключении к хэту.
6. Исключена возможность "зависания" персонажа при сбое сервера. При обрыве связи хэта с сервером, по истечении 5 минут ваш персонаж сможет зайти на любой другой активный сервер.

Обновление 3 (версия 1.03)
--------------------------
1. Уменьшен траффик при игре на интернет-сервере

Обновление 2 (версия 1.02)
--------------------------
1. Исправлена ошибка с некорректным улучшением магии в предметах.
2. Исправлена ошибка со сбоем игры при слишком длинном имени клана.
3. Исправлена ошибка с невозрождением летающих и левитирующих монстров, находящихся над водой или над горами в сетевой игре.
4. Добавлена возможность игры на интернет-сервере.

Правила пользования игровым сервером
------------------------------------
Для игры на сервере необходима лицензионная версия игры "Аллоды II: Повелитель Душ". В вашей коробке с игрой в специальном конверте находится личный регистрационный код для игры на сервере. 
Внимание! Каждая копия игры имеет свой уникальный регистрационный код. Попытка зарегистрироваться с другим кодом будет безуспешной.
Для получения технической поддержки необходимо отправить регистрационную карточку в фирму 1С, но для регистрации на игровом сервере это необязательно, достаточно наличия личного кода.
Структура игрового сервера претерпела значительные изменения по сравнению с игрой "Аллоды: Печать Тайны". Теперь за подключение пользователей и хранение персонажей отвечает специальная программа - хэт. Запустите игру, нажмите в главном меню кнопку Сервер. Выберите пункт "подключение к хэту". Введите в верхней строке адрес хэта - hat.nival.com. Выберите тип игры (кооперативная, турнир, командный турнир). В строках "логин" и "пароль" введите соответственно ваш логин и пароль. Нажмите "принять". Выбрав в следующем экране персонажа, вы попадете в экран со списком серверов. Выбрав сервер, вы можете увидеть в нижней части экрана пинг до него. Наименьшее среднее время пинга и наименьший процент потери пакетов означает лучшую связь с данным сервером. Если сервер выделен серым цветом, значит, вы не можете на него попасть по одной из причин - сервер переполнен, или уровень вашего персонажа не соответствует сложности карты, на которой происходит игра. Чтобы обновить список серверов, нажмите "обновить". Чтобы начать игру, выберите сервер, на который вам разрешен вход, и нажмите "принять".
Карты, используемые для игры на сервере, будут автоматически загружены на ваш компьютер при входе в игру.
ПРИМЕЧАНИЕ. В списке серверов показываются только те сервера, которые соответствуют выбранному вами типу игры.

Особенности обычной (кооперативной) игры
----------------------------------------
Чтобы безопасно выйти из игры, вам, как и на сервере игры "Аллоды: Печать Тайны", необходимо использовать ратушу своим героем. Если у вас оборвалась связь с сервером, или же вы вышли из игры другим способом, то ваш персонаж останется на сервере в течение 5 минут. Восстановив связь, и подключившись к хэту, вы получите предложение отправиться на тот сервер, где вы играли до этого и продолжить игру, или подождать 5 минут и выбрать другой сервер и другого персонажа.
Файлы с вашими персонажами хранятся на хэте. Таким образом, все сервера, подключенные к одному хэту, будут иметь общую базу данных персонажей. При удалении персонажа на вашем жестком диске неигровыми средствами (т.е. при простом удалении файла) он будет восстановлен при следующем подключении к хэту. 
Внимание! Персонажей, созданных в обычной сетевой игре, переносить на игровой сервер нельзя. 
Максимальное количество персонажей, которое можно создать с одного логина - 16. Если у вас накопилось 16 персонажей, и вы хотите создать нового, вам придется сначала удалить одного из старых персонажей.

Ограничения по уровню сложности карт.
Для определения, на какие карты вам разрешено попасть, используется максимальный из навыков вашего персонажа без учета магических предметов, поднимающих навыки.
Уровень карты   Навык
Легкий          0..50
Средний	        26..75
Сложный         51..95
Ужас!           90..100

Изменения в игровой системе.
Магия увеличения главных атрибутов героя (сила, ловкость, разум, дух), находящаяся в предметах, ослаблена. Теперь максимальное значение атрибута +3 (за исключением предметов, которые можно будет найти на специальных квестовых картах). Это изменение относится только к игровому серверу. В обычной сетевой игре все осталось по-старому.

Особенности режима "турнир"
---------------------------
В этом режиме вы играете специальными, заранее заданными персонажами. Запрещено: переодевание, получение опыта (кроме подбирания специальных бонусов), выпадение вещей при смерти персонажа, покупка и продажа вещей, выполнение заданий, изменение дипломатии.
Цель игры - набрать как можно больше очков за убийство других персонажей. В игру можно вступать в любой момент. При выходе из игры персонаж сразу уходит с карты, не оставаясь там на 5 минут, как в кооперативной игре. При достижении лимита очков или по истечении определенного времени игра заканчивается. Текущий счет игры можно посмотреть, нажав клавишу W (счет игры выводится вместо списка заданий).
На карте в режиме "турнир" случайным образом разбрасываются мешки со свитками. Также, хорошие временные бонусы можно получить, убивая монстров. Эти бонусы автоматически применяются на персонажа, который поднимет мешок, оставшийся от монстра:
- увеличение навыков персонажа (навыки вернутся в изначальное значение при смерти персонажа)
- невидимость
- ускорение
- защита от магии
- магический щит (броня)
- благословление (в режиме "турнир" увеличивает не вероятность максимального урона, а сам урон в 4 раза)
Карта в режиме "турнир", как правило, содержит несколько мест оживления персонажей. После смерти вы всегда будете оживать в случайно выбранном месте.
Действие заклинания "телепорт" в режиме "турнир" ограничено 5-7 клетками, в зависимости от навыка.

Особенности режима "командный турнир"
-------------------------------------
Режим "командный турнир", отличается от обычного турнира главным образом тем, что игра происходит командами. Команд всегда две - красные и синие. При выборе сервера вам необходимо указать, за какую команду вы собираетесь играть. Менять команду после подключения к игре нельзя. Все игроки одной команды будут иметь альянс и видимость друг с другом, а также будут иметь одинаковый цвет.
Карта в этом режиме, как правило, содержит две базы: для красной команды и для синей. При смерти ваш персонаж всегда будет оживать на своей базе. База может иметь охрану, управляемую компьютером (AI-игроком).
Игра в режиме "командный турнир" требует синхронизации начала игры. Игра начнется только тогда, когда все желающие играть успешно к ней подключатся. Подключившись к игре, вы должны заявить о своей готовности, написав #ready в строке сообщений. Игра будет напоминать вам об этом каждые 15 секунд. Узнать о степени готовности других игроков можно, вызвав окно со счетом игры (клавишей W). Пока все игроки не заявят о своей готовности, вашему персонажу не разрешат передвигаться по карте и выполнять любые другие действия. Когда все игроки будут готовы, вы получите сообщение "Игра началась!". Вступать в командный турнир после его начала нельзя. В случае потери связи ваш персонаж останется на карте до окончания игры.

"Захвати флаг"
Кроме убийства ваших противников, вы можете заработать дополнительные очки для своей команды, украв флаг с чужой базы и доставив его на свою. Но, игрок, захвативший чужой флаг, лишается всех текущих бонусов, лишается возможности использовать бонусы на время ношения флага, а также лишается возможности использовать заклинания "телепорт", "невидимость" и "каменное проклятие".
При потере флага (смерти персонажа, несшего флаг) он будет лежать на земле в течение 20 секунд, после чего автоматически вернется на свою базу. Если за это время его поднимет свой игрок, флаг также вернется на свою базу - нести его туда не обязательно.

Обновление 1 (версия 1.01)
--------------------------
1. Исправлена ошибка с продажей "нечестных" предметов в магазине.
2. Исправлена ошибка со сбоем игры в магазине.
3. Исправлена ошибка с невозможностью повторного входа в игру после использования команды #kick.
4. Исправлена ошибка с лагом на сервере при неудачном подключении клиента (TCP/IP).
5. Изменен механизм распределения опыта, получаемого в качестве вознаграждения за выполненное задание в сетевой игре.
6. Исправлена ошибка с невозможностью переговоров игроков в режиме выбора карты, если до этого в игре был установлен флаг "молчит" в дипломатии.
7. Исправлена ошибка со сбоем игры при смене карты в момент, когда персонаж мертв.
8. Исправлена ошибка с появлением списка заданий из сетевой игры в одиночной игре.
9. Исправлена ошибка с получением урона и смертью персонажа, находящегося в трактире.
10. Исправлена ошибка со сбоем игры при быстром нажатии Enter в момент начала миссии.
11. Исправлена ошибка со сбоем игры при быстром щелкании мышью на кнопке ОК при восстановлении сохраненной игры.
12. Исправлена ошибка со сбоем игры при переодевании персонажа.
13. Исправлена ошибка с исчезновением предметов в рюкзаке.
14. Исправлена ошибка с несохранением накопленной информации о монстрах в сетевой игре.
15. Исправлена ошибка с невозможностью повторно войти в игру при разрыве соединения (Персонаж оставался в списке игроков сервера, и при попытке входа клиенту выдавалась Неизвестная ошибка).
16. Исправлена ошибка со сбоем игры при вхождении на сервер дублем персонажа, уже присутствующего в игре.
17. Введено ограничение на размер мешка - 1024 разных предмета. Слишком большой мешок вызывал сбой игры.
18. Исправлена ошибка с неправильными сообщениями при смене режима автокастинга.
19. Доработано соединение по TCP/TP, добавлена возможность настраивать параметры соединения через Интернет.
Параметр latency - фактически влияет на время повторной посылки пакетов при их потере. По умолчанию его значение подбирается динамически. Чем больше latency, тем стабильнее соединение, но и тем больше возможная задержка в реакции сервера на команду игрока при потере пакетов. Существуют 2 способа задать latency:
1) опция -latencyNNNN в командной строке (пример: -latency2000)
2) команда #set latency NNNN в режиме посылки сообщений игрокам.
Значение latency задается в миллисекундах. Возможные значения от 50 до 10000мс.
Просмотреть текущее значение latency и процент потерянных пакетов можно командой #show latency в режиме посылки сообщений игрокам. Установка latency в 0 означает динамический режим подбора этого параметра.
Параметр timeout. Если в течение времени, заданного этим параметром, компьютер не получает пакетов от другого компьютера, соединение будет считаться разорванным. Этот параметр задается опцией в командной строке -timeoutNNN. Время задается в секундах. Возможные значения - от 1 до 120 секунд. По умолчанию timeout равен 15 секундам. Рекомендуется увеличивать это значение при нестабильном соединении.
20. Добавлена возможность послать информацию о своем сервере, открытом на протоколе TCP/TP, на страницу серверов, считывать список серверов с этой страницы и подключаться к одному из этих серверов.
Для посылки информации о своем сервере создайте конфигурационный файл сервера. Его можно подключить к игре с помощью опции в командной строке -cfg"file.cfg". ВНИМАНИЕ! Если вы назовете свой файл "server.cfg", то он будет подключаться автоматически, независимо от того, указали ли вы опцию -cfg в командной строке или нет.

Конфигурационный файл должен содержать следующие строки:
[Settings]
IPAddress=195.2.0.126
Description=My Server
[ReportToWWW]
server.nival.com/cgi-shl/a2/a2list.exe

IPAddress - укажите здесь адрес своего сервера
Description - напишите название своего сервера. В названии нельзя использовать русские буквы. Также не рекомендуется делать длинные названия, поскольку вы их не сможете увидеть в полном виде в списке.
Игра будет отсылать на WWW-страницу следующую информацию: название сервера, название карты, ее размер и уровень сложности, количество игроков в игре и адрес вашего сервера.

Чтобы подключиться к одному из серверов, находящемуся в этом списке, нажмите кнопку "Сервер" в главном меню игры. На запрос URL страницы со списком серверов введите следующий адрес: server.nival.com/cgi-shl/a2/srvlist.exe. Затем выберите персонажа, которым вы собираетесь играть. После этого вы попадете в экран со списком серверов. Выберите сервер, к которому вы хотите подключиться, и нажмите "принять". Вы попадете в уже знакомый вам экран "вступить/открыть игру". Далее действуйте, как при обычном подключении к игре по TCP/IP.

21. Исправлено несколько ошибок в редакторе карт.

